<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Controle Financeiro</title>
</head>

<body>

<h2>Novo Lançamento</h2>

<select id="tipo">
  <option value="Receita">Receita</option>
  <option value="Despesa">Despesa</option>
</select>

<input type="date" id="data">
<input type="number" id="valor" placeholder="Valor">
<input type="text" id="descricao" placeholder="Descrição">

<button onclick="adicionar()">Adicionar</button>

<hr>

<h2>Movimentações</h2>

<table border="1">
<thead>
<tr>
  <th>Tipo</th>
  <th>Data</th>
  <th>Valor</th>
  <th>Descrição</th>
</tr>
</thead>
<tbody id="tabela"></tbody>
</table>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzrQhzqfPpy-8nKvmV-lyc2_XztxZ-ogIhJZl44JcOSQjFP58jSiLqNUwJ6zo0LCJ5l/exec";

function carregarDados() {
  fetch(API_URL)
    .then(res => res.json())
    .then(dados => {
      const tabela = document.getElementById("tabela");
      tabela.innerHTML = "";

      dados.forEach(item => {
        tabela.innerHTML += `
          <tr>
            <td>${item.tipo}</td>
            <td>${item.data}</td>
            <td>${item.valor}</td>
            <td>${item.descricao}</td>
          </tr>
        `;
      });
    });
}

function adicionar() {
  const tipo = document.getElementById("tipo").value;
  const data = document.getElementById("data").value;
  const valor = document.getElementById("valor").value;
  const descricao = document.getElementById("descricao").value;

  fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({ tipo, data, valor, descricao })
  })
  .then(() => carregarDados());
}

carregarDados();
</script>

</body>
</html>
